<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create PO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
    <header class="no-print mb-4">
        <% include index.ejs %>
    </header>
  <h1>Create Purchase Order</h1>

  <form action="/po/new" method="POST">
    <% if (pr) { %>
      <input type="hidden" name="prId" value="<%= pr._id %>">
    <% } %>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Date</label>
        <input type="date" name="date" class="form-control" value="<%= po.date || '' %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Manual PO Number</label>
        <input type="number" name="manual_POno" class="form-control" value="<%= po.manual_POno || '' %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Quotation</label>
        <input type="text" name="quotation" class="form-control" value="<%= po.quotation || '' %>">
      </div>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Attention</label>
        <input type="text" name="attention" class="form-control" value="<%= po.attention || (pr?.name || '') %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Email</label>
        <input type="email" name="email" class="form-control" value="<%= po.email || '' %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Mobile</label>
        <input type="text" name="mobile" class="form-control" value="<%= po.mobile || '' %>">
      </div>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label>Tel</label>
        <input type="text" name="Tel" class="form-control" value="<%= po.Tel || '' %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Fax</label>
        <input type="text" name="fax" class="form-control" value="<%= po.fax || '' %>">
      </div>

      <div class="col-md-4 mb-3">
        <label>Taxpayer No.</label>
        <input type="text" name="Taxpayernol" class="form-control" value="<%= po.Taxpayernol || '' %>">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Tax ID</label>
        <input type="text" name="Texid" class="form-control" value="<%= po.Texid || '' %>">
      </div>

      <div class="col-md-6 mb-3">
        <label>Payment Term</label>
        <input type="text" name="Paymentterm" class="form-control" value="<%= po.Paymentterm || (pr?.term || '') %>">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Delivery Date</label>
        <input type="date" name="deliverydate" class="form-control" value="<%= po.deliverydate || '' %>">
      </div>

      <div class="col-md-6 mb-3">
        <label>Purchasing By</label>
        <input type="text" name="purchasing" class="form-control" value="<%= po.purchasing || '' %>">
      </div>
    </div>

    <div class="mb-3">
      <label>Approval</label>
      <input type="text" name="approval" class="form-control" value="<%= po.approval || '' %>">
    </div>

    <button type="submit" class="btn btn-success">Save PO</button>
    <a href="/pr/<%= pr?._id || '' %>" class="btn btn-secondary">Back to PR</a>
  </form>

  <% if (errors) { %>
    <div class="alert alert-danger mt-3">
      <pre><%= JSON.stringify(errors, null, 2) %></pre>
    </div>
  <% } %>

</body>
</html>
