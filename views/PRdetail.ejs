<!DOCTYPE html>
<html>
<head>
  <title>PR Detail</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/stylesheets/Report.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <header class="no-print">
    <% include index.ejs %>
  </header>
  <h1>PR #<%= pr.PRno || pr._id %> Details</h1>
  <p><strong>Name:</strong> <%= pr.name %></p>
  <p><strong>Customer:</strong> <%= pr.customer %></p>
  <p><strong>Supplier:</strong> <%= pr.supplier %></p>
  <p><strong>Date:</strong> <%= pr.date ? pr.date.toISOString().substr(0,10) : "" %></p>
  <p><strong>Note:</strong> <%= pr.note %></p>
  <a href="/pr/<%= pr._id %>/pritem" class="btn btn-primary my-3">‚ûï Add New Item</a>

  <h2>Items</h2>
  <% if (pr.pritem && pr.pritem.length > 0) { %>
    <table border="1" cellpadding="5" cellspacing="0">
      <thead>
        <tr>
          <th>Quantity</th><th>Unit</th><th>SN</th><th>Description</th><th>In Stock</th><th>Out Stock</th><th>Price</th><th>PPU</th><th>Remark</th><th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% pr.pritem.forEach(item => { %>
          <tr>
            <td><%= item.quantity %></td>
            <td><%= item.unit %></td>
            <td><%= item.sn %></td>
            <td><%= item.description %></td>
            <td><%= item.instock %></td>
            <td><%= item.outstock %></td>
            <td><%= item.price %></td>
            <td><%= item.ppu %></td>
            <td><%= item.remark %></td>
            <td><%= item.total %></td>
            <td>
              <a href="/pr/<%= pr._id %>/pritem/<%= item._id %>/edit" class="btn btn-sm btn-warning">‚úèÔ∏è Edit</a>
                <form method="POST" action="/pr/<%= pr._id %>/pritem/<%= item._id %>/delete" style="display:inline;">
                  <button class="btn btn-sm btn-danger" onclick="return confirm('Delete this item?')">üóëÔ∏è Delete</button>
                </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } else { %>
    <p>No items added yet.</p>
  <% } %>

</body>
</html>
